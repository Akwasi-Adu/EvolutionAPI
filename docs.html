<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Reference | EvolutionAPI</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #0F172A; --sidebar: #1E293B; --content: #0F172A;
            --primary: #38BDF8; --secondary: #818CF8;
            --text: #F1F5F9; --text-dim: #94A3B8; --border: #334155;
            --method-get: #38BDF8; --method-post: #10B981; --method-put: #F59E0B; --method-delete: #EF4444;
        }

        * { box-sizing: border-box; }
        body { margin: 0; font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); display: flex; height: 100vh; overflow: hidden; }

        /* Sidebar */
        aside { width: 320px; min-width: 250px; background: var(--sidebar); display: flex; flex-direction: column; flex-shrink: 0; position: relative; }
        
        #resizer { width: 5px; background: transparent; cursor: col-resize; position: absolute; right: 0; top: 0; bottom: 0; z-index: 100; transition: background 0.2s; border-right: 1px solid var(--border); }
        #resizer:hover, #resizer.active { background: var(--primary); }

        .logo-area { padding: 20px 20px 10px 20px; border-bottom: 1px solid transparent; }
        .back-link { display: flex; align-items: center; gap: 6px; color: var(--text-dim); text-decoration: none; font-size: 0.8rem; margin-bottom: 15px; font-weight: 600; transition: 0.2s; }
        .back-link:hover { color: var(--primary); }
        
        .logo { font-weight: 800; font-size: 1.4rem; color: white; text-decoration: none; display: block; }
        .logo span { color: var(--primary); }
        .version-tag { font-size: 0.75rem; color: #64748B; margin-top: 4px; }
        
        .search-area { padding: 15px 20px; border-bottom: 1px solid var(--border); position: relative; }
        #searchInput { 
            width: 100%; background: #0F172A; border: 1px solid var(--border); color: white; 
            padding: 10px 15px 10px 35px; border-radius: 6px; font-family: 'Inter', sans-serif; font-size: 0.9rem; outline: none; transition: 0.2s;
        }
        #searchInput:focus { border-color: var(--primary); box-shadow: 0 0 0 2px rgba(56, 189, 248, 0.2); }
        .search-icon { position: absolute; left: 32px; top: 26px; color: var(--text-dim); width: 14px; height: 14px; }
        .search-key { position: absolute; right: 30px; top: 25px; background: var(--border); color: var(--text-dim); font-size: 0.7rem; padding: 2px 6px; border-radius: 4px; font-family: inherit; pointer-events: none; }

        .nav-scroll { flex: 1; overflow-y: auto; padding: 10px 0; }
        .nav-group { margin-bottom: 15px; }
        .nav-header { padding: 8px 24px; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; color: var(--text-dim); font-weight: 700; margin-top: 10px; }
        .nav-item { display: flex; align-items: center; gap: 8px; padding: 6px 24px; color: var(--text); text-decoration: none; font-size: 0.85rem; border-left: 3px solid transparent; transition: 0.1s; cursor: pointer; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .nav-item:hover { background: rgba(255,255,255,0.05); color: var(--primary); }
        .nav-item.active { background: rgba(56, 189, 248, 0.1); border-left-color: var(--primary); color: var(--primary); }
        
        .nav-method { font-family: 'JetBrains Mono', monospace; font-size: 0.6rem; font-weight: bold; padding: 2px 4px; border-radius: 3px; min-width: 35px; text-align: center; flex-shrink: 0; }
        .nav-method.get { color: var(--method-get); background: rgba(56, 189, 248, 0.1); }
        .nav-method.post { color: var(--method-post); background: rgba(16, 185, 129, 0.1); }
        .nav-method.put { color: var(--method-put); background: rgba(245, 158, 11, 0.1); }
        .nav-method.delete { color: var(--method-delete); background: rgba(239, 68, 68, 0.1); }

        /* Main Content */
        main { flex: 1; overflow-y: auto; padding: 40px 60px; scroll-behavior: smooth; }
        .container { max-width: 900px; margin: 0 auto; }

        header { margin-bottom: 50px; border-bottom: 1px solid var(--border); padding-bottom: 30px; }
        h1 { font-size: 2.5rem; margin: 0 0 15px 0; }
        .intro-text { font-size: 1.1rem; color: var(--text-dim); line-height: 1.6; }
        
        /* INFO BOX (Updated) */
        .info-box {
            background: rgba(56, 189, 248, 0.05);
            border-left: 3px solid var(--primary);
            padding: 15px 20px;
            border-radius: 0 6px 6px 0;
            color: var(--text-dim);
            font-size: 0.9rem;
            margin-top: 25px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .info-row { display: flex; gap: 12px; align-items: start; }
        .info-box svg { width: 20px; height: 20px; color: var(--primary); flex-shrink: 0; margin-top: 2px; }

        /* Endpoint Card */
        .endpoint-group { margin-bottom: 60px; }
        .group-title { font-size: 1.8rem; margin-bottom: 25px; color: white; padding-bottom: 10px; border-bottom: 1px solid var(--border); display: flex; align-items: center; }
        
        .card { background: #131C2E; border: 1px solid var(--border); border-radius: 12px; margin-bottom: 25px; overflow: hidden; scroll-margin-top: 20px; transition: border-color 0.2s; }
        .card.expanded { border-color: var(--primary); box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.2); }
        
        .card-header { padding: 15px 20px; border-bottom: 1px solid transparent; display: flex; align-items: center; gap: 15px; background: rgba(255,255,255,0.02); cursor: pointer; transition: background 0.2s; }
        .card-header:hover { background: rgba(255,255,255,0.04); }
        .card.expanded .card-header { border-bottom-color: var(--border); background: rgba(255,255,255,0.04); }
        
        .method { font-family: 'JetBrains Mono', monospace; font-weight: 800; font-size: 0.85rem; padding: 6px 10px; border-radius: 6px; text-transform: uppercase; min-width: 70px; text-align: center; }
        .get { background: rgba(56, 189, 248, 0.1); color: var(--method-get); border: 1px solid rgba(56, 189, 248, 0.3); }
        .post { background: rgba(16, 185, 129, 0.1); color: var(--method-post); border: 1px solid rgba(16, 185, 129, 0.3); }
        .put { background: rgba(245, 158, 11, 0.1); color: var(--method-put); border: 1px solid rgba(245, 158, 11, 0.3); }
        .delete { background: rgba(239, 68, 68, 0.1); color: var(--method-delete); border: 1px solid rgba(239, 68, 68, 0.3); }
        
        .path { font-family: 'JetBrains Mono', monospace; font-size: 0.95rem; color: #E2E8F0; word-break: break-all; }
        .summary { margin-left: auto; color: var(--text-dim); font-size: 0.9rem; display: none; }
        @media(min-width: 1024px) { .summary { display: block; } }

        .card-body { padding: 25px; display: none; } 
        .card.expanded .card-body { display: block; animation: slideDown 0.2s ease-out; }
        @keyframes slideDown { from { opacity:0; transform:translateY(-10px); } to { opacity:1; transform:translateY(0); } }

        .desc { color: var(--text-dim); margin-bottom: 25px; line-height: 1.6; }
        h4 { text-transform: uppercase; font-size: 0.75rem; color: var(--primary); letter-spacing: 1px; margin: 20px 0 10px 0; }

        .param-table { width: 100%; border-collapse: collapse; font-size: 0.9rem; margin-bottom: 20px; }
        .param-table th { text-align: left; color: var(--text-dim); padding: 10px; border-bottom: 1px solid var(--border); font-weight: 600; }
        .param-table td { padding: 12px 10px; border-bottom: 1px solid #334155; color: #E2E8F0; vertical-align: top; }
        .param-name { font-family: 'JetBrains Mono', monospace; color: var(--primary); font-weight: 600; }
        .param-type { font-family: 'JetBrains Mono', monospace; color: #F59E0B; font-size: 0.8rem; }
        .req { color: #EF4444; font-size: 0.7rem; margin-left: 5px; font-weight: bold; }

        pre { background: #0B1120; padding: 20px; border-radius: 8px; border: 1px solid var(--border); overflow-x: auto; font-family: 'JetBrains Mono', monospace; font-size: 0.85rem; color: #A5B4FC; margin: 0; max-height: 400px; }

        #loader { padding: 40px; text-align: center; color: var(--text-dim); }
        .no-results { text-align: center; padding: 40px; color: var(--text-dim); display: none; }
        .hidden { display: none !important; }

        /* MOBILE RESPONSIVENESS FOR DOCS */
@media (max-width: 768px) {
    body { flex-direction: column; overflow: auto; }
    
    /* 1. Turn Sidebar into a Sticky Header */
    aside { 
        width: 100%; 
        height: auto; 
        max-height: none; /* Remove limit */
        border-right: none; 
        border-bottom: 1px solid var(--border); 
        position: sticky;
        top: 0;
        z-index: 100;
        background: rgba(15, 23, 42, 0.95); /* Slight transparency */
        backdrop-filter: blur(10px);
    }

    /* 2. Hide Content by Default */
    #sidebarContent {
        display: none; /* Hidden initially */
        border-top: 1px solid var(--border);
    }

    /* 3. Show Content when Open */
    aside.open #sidebarContent {
        display: block;
        height: 80vh; /* Take up most of screen when open */
        overflow-y: auto;
    }

    /* 4. Style the Toggle Button */
    #mobileDocsToggle {
        display: block;
        background: transparent;
        border: 1px solid var(--border);
        color: white;
        padding: 6px;
        border-radius: 6px;
        cursor: pointer;
    }
    
    /* 5. Layout Tweaks */
    .logo-area { padding: 15px 20px; }
    .search-key { display: none; } /* Hide "/" hint on mobile */
    #resizer { display: none; }
    
    /* 6. Main Content Padding */
    main { padding: 30px 20px; }
    
    /* 7. Card Adjustments */
    .card-header { 
        flex-direction: column; 
        align-items: flex-start; 
        gap: 10px; 
    }
    .summary { 
        margin-left: 0; 
        display: block; 
        margin-top: 5px; 
        font-size: 0.85rem;
        opacity: 0.8;
    }
    .method { font-size: 0.75rem; padding: 4px 8px; }
    .path { font-size: 0.85rem; }
}

/* Hide toggle on desktop */
@media (min-width: 769px) {
    #mobileDocsToggle { display: none; }
}
    </style>
    <script>
    !function(t,e){var o,n,p,r;e.__SV||(window.posthog && window.posthog.__loaded)||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.crossOrigin="anonymous",p.async=!0,p.src=s.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="init Rr Mr fi Cr Ar ci Tr Fr capture Mi calculateEventProperties Lr register register_once register_for_session unregister unregister_for_session Hr getFeatureFlag getFeatureFlagPayload isFeatureEnabled reloadFeatureFlags updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures on onFeatureFlags onSurveysLoaded onSessionId getSurveys getActiveMatchingSurveys renderSurvey displaySurvey canRenderSurvey canRenderSurveyAsync identify setPersonProperties group resetGroups setPersonPropertiesForFlags resetPersonPropertiesForFlags setGroupPropertiesForFlags resetGroupPropertiesForFlags reset get_distinct_id getGroups get_session_id get_session_replay_url alias set_config startSessionRecording stopSessionRecording sessionRecordingStarted captureException loadToolbar get_property getSessionProperty Ur jr createPersonProfile zr kr Br opt_in_capturing opt_out_capturing has_opted_in_capturing has_opted_out_capturing get_explicit_consent_status is_capturing clear_opt_in_out_capturing Dr debug M Nr getPageViewId captureTraceFeedback captureTraceMetric $r".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
    posthog.init('phc_mXmB0lACQwvtOf9yVjunaKmMRVcacAGIQP74ZJxL7qc', {
        api_host: 'https://us.i.posthog.com',
        defaults: '2025-05-24',
        person_profiles: 'identified_only', // or 'always' to create profiles for anonymous users as well
    })
</script>
</head>
<body>

    <aside id="sidebar">
    <div id="resizer"></div>
    
    <div class="logo-area">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <div>
                <a href="index.html" class="back-link">&larr; Back to homepage</a>
                <a href="index.html" class="logo">Evo<span>Connect</span></a>
            </div>
            
            <button id="mobileDocsToggle" aria-label="Toggle Menu">
                <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
            </button>
        </div>
        <div class="version-tag">v1.0 Reference</div>
    </div>

    <div id="sidebarContent">
        <div class="search-area">
            <svg class="search-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
            <input type="text" id="searchInput" placeholder="Search endpoints...">
            <span class="search-key">/</span>
        </div>
        <div class="nav-scroll" id="navContainer"></div>
    </div>
</aside>

    <main>
        <div class="container" id="mainContent">
            <div id="loader">Loading Documentation...</div>
            <div class="no-results" id="noResults">No endpoints found matching your search.</div>
        </div>
    </main>

    <script>
        const SWAGGER_FILE = 'swagger.json';
        let allEndpoints = [];

        async function loadDocs() {
            try {
                const response = await fetch(SWAGGER_FILE);
                if (!response.ok) throw new Error("Could not load swagger.json");
                const data = await response.json();
                renderDocs(data);
            } catch (error) {
                document.getElementById('loader').innerHTML = `
                    <h2 style="color:#EF4444">Error Loading Docs</h2>
                    <p>${error.message}</p>
                    <p>Please ensure <code>swagger.json</code> is in the same directory as this HTML file.</p>
                    <p style="font-size:0.9rem; margin-top:15px;">If testing locally, use a local server (VS Code Live Server).</p>
                `;
            }
        }

        function renderDocs(spec) {
            const navContainer = document.getElementById('navContainer');
            const mainContent = document.getElementById('mainContent');
            
            const headerHtml = `
                <header>
                    <h1>${spec.info.title}</h1>
                    <p class="intro-text">${spec.info.description || 'Complete API Reference'}</p>
                    
                    <div class="info-box">
                        <div class="info-row">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                            <span>Click on any endpoint below to expand details.</span>
                        </div>
                        <div class="info-row">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg>
                            <span><strong>Authentication Required:</strong> All endpoints require a Bearer token.</span>
                        </div>
                    </div>
                </header>
            `;
            
            const tags = {};
            Object.keys(spec.paths).forEach(path => {
                const methods = spec.paths[path];
                Object.keys(methods).forEach(method => {
                    const ep = methods[method];
                    const tag = ep.tags ? ep.tags[0] : 'General';
                    if (!tags[tag]) tags[tag] = [];
                    
                    const endpointObj = {
                        id: `${method}-${path}`.replace(/[^a-zA-Z0-9-]/g, ''),
                        method: method.toUpperCase(),
                        path: path,
                        summary: ep.summary,
                        desc: ep.description,
                        tag: tag,
                        params: ep.parameters,
                        body: ep.requestBody,
                        responses: ep.responses,
                        components: spec.components
                    };
                    
                    tags[tag].push(endpointObj);
                    allEndpoints.push(endpointObj);
                });
            });

            let fullHtml = headerHtml;
            let navHtml = '';

            Object.keys(tags).forEach(tag => {
                navHtml += `<div class="nav-group" data-tag="${tag}">
                    <div class="nav-header">${tag}</div>`;
                
                let groupHtml = `<div class="endpoint-group" data-tag="${tag}">
                    <h2 class="group-title">${tag}</h2>`;

                tags[tag].forEach(ep => {
                    navHtml += `
                        <a href="#${ep.id}" class="nav-item" title="${ep.summary || ep.path}" data-filter="${ep.path} ${ep.summary}">
                            <span class="nav-method ${ep.method.toLowerCase()}">${ep.method}</span>
                            <span>${ep.summary || ep.path}</span>
                        </a>`;

                    groupHtml += `
                        <div class="card" id="${ep.id}" data-filter="${ep.path} ${ep.summary}">
                            <div class="card-header" onclick="toggleCard(this)">
                                <div class="method ${ep.method.toLowerCase()}">${ep.method}</div>
                                <div class="path">${ep.path}</div>
                                <div class="summary">${ep.summary}</div>
                            </div>
                            <div class="card-body">
                                <div class="desc">${ep.desc || 'No description.'}</div>
                                ${renderParams(ep.params)}
                                ${renderBody(ep.body, ep.components)}
                            </div>
                        </div>`;
                });

                navHtml += `</div>`;
                groupHtml += `</div>`;
                fullHtml += groupHtml;
            });

            navContainer.innerHTML = navHtml;
            mainContent.innerHTML = fullHtml + document.getElementById('noResults').outerHTML; 
            document.getElementById('loader').remove();
        }

        window.toggleCard = function(headerElement) {
            const currentCard = headerElement.parentElement;
            const isAlreadyOpen = currentCard.classList.contains('expanded');
            document.querySelectorAll('.card.expanded').forEach(card => card.classList.remove('expanded'));
            if (!isAlreadyOpen) currentCard.classList.add('expanded');
        };

        function renderParams(params) {
            if (!params || params.length === 0) return '';
            return `
                <h4>Parameters</h4>
                <table class="param-table">
                    <thead><tr><th>Name</th><th>In</th><th>Description</th></tr></thead>
                    <tbody>
                        ${params.map(p => `
                            <tr>
                                <td><span class="param-name">${p.name}</span>${p.required ? '<span class="req">*</span>' : ''}</td>
                                <td><span class="param-type">${p.in}</span></td>
                                <td>${p.description || '-'}</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>`;
        }

        function renderBody(body, components) {
            if (!body || !body.content['application/json']) return '';
            const schema = body.content['application/json'].schema;
            let displayJson = {};

            if (schema.$ref) {
                const refName = schema.$ref.split('/').pop();
                const def = components.schemas[refName];
                if (def && def.properties) {
                    Object.keys(def.properties).forEach(k => {
                        displayJson[k] = def.properties[k].type || "string";
                    });
                }
            }

            return `<h4>Request Body</h4><pre>${JSON.stringify(displayJson, null, 2)}</pre>`;
        }

        const searchInput = document.getElementById('searchInput');
        const sidebar = document.getElementById('sidebar');
        const resizer = document.getElementById('resizer');

        let isResizing = false;
        resizer.addEventListener('mousedown', (e) => { isResizing = true; document.body.style.cursor = 'col-resize'; resizer.classList.add('active'); });
        document.addEventListener('mousemove', (e) => {
            if (!isResizing) return;
            let newWidth = e.clientX;
            if(newWidth < 250) newWidth = 250; 
            if(newWidth > 600) newWidth = 600; 
            sidebar.style.width = `${newWidth}px`;
        });
        document.addEventListener('mouseup', () => { isResizing = false; document.body.style.cursor = 'default'; resizer.classList.remove('active'); });

        document.addEventListener('keydown', (e) => {
            if (e.key === '/' && document.activeElement !== searchInput) { e.preventDefault(); searchInput.focus(); }
        });

        searchInput.addEventListener('input', (e) => {
            const term = e.target.value.toLowerCase();
            let hasResults = false;

            document.querySelectorAll('.nav-item').forEach(item => {
                const text = item.dataset.filter.toLowerCase();
                item.classList.toggle('hidden', !text.includes(term));
            });

            document.querySelectorAll('.nav-group').forEach(group => {
                const visibleChildren = group.querySelectorAll('.nav-item:not(.hidden)').length;
                group.classList.toggle('hidden', visibleChildren === 0);
            });

            document.querySelectorAll('.card').forEach(card => {
                const text = card.dataset.filter.toLowerCase();
                const match = text.includes(term);
                card.classList.toggle('hidden', !match);
                if(match) hasResults = true;
            });

            document.querySelectorAll('.endpoint-group').forEach(group => {
                const visibleCards = group.querySelectorAll('.card:not(.hidden)').length;
                group.classList.toggle('hidden', visibleCards === 0);
            });

            document.getElementById('noResults').style.display = (!hasResults && term.length > 0) ? 'block' : 'none';
        });

        loadDocs();

        // Mobile Menu Toggle Logic
const mobileToggle = document.getElementById('mobileDocsToggle');
const sidebarEl = document.getElementById('sidebar');

mobileToggle.addEventListener('click', () => {
    sidebarEl.classList.toggle('open');
});

// Auto-close menu when clicking a link
document.getElementById('navContainer').addEventListener('click', (e) => {
    if (e.target.closest('.nav-item') && window.innerWidth <= 768) {
        sidebarEl.classList.remove('open');
    }
});
    </script>
</body>
</html>